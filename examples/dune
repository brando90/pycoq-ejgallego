(rule
 (alias runtest)
 (deps
  (:test-file test.py)
  (package coq-serapi)
   ../pycoq/pycoq.so)
 (targets test.out)
 (action
   (with-outputs-to %{targets}
    (run python3 %{test-file}))))

(rule
 (alias runtest)
 (deps
  (:test-file test2.py)
  (package coq-serapi)
   ../pycoq/pycoq.so)
 (targets test2.out)
 (action
   (with-outputs-to %{targets}
    (run python3 %{test-file}))))

(rule
 (alias runtest)
 (deps
  (:test-file error.py)
  (package coq-serapi)
   ../pycoq/pycoq.so)
 (targets error.out)
 (action
   (with-outputs-to %{targets}
    (run python3 %{test-file}))))
